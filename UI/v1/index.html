<!DOCTYPE html>
<html>
  <head>
    <title>PathGeo-MapTime</title>
    <meta name="viewport" http-equiv="Content-Type" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	
	<link type="text/css" href='js/jquery/jquery.mobile-1.3.0.min.css' rel="stylesheet" />
	<link rel="stylesheet" href="js/leaflet/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="js/leaflet/leaflet.ie.css" /><![endif]-->
	<link rel="stylesheet" href="js/leaflet/MarkerCluster.css" />
	<link rel="stylesheet" href="js/leaflet/MarkerCluster.Default.css" />
	<link rel="stylesheet" href="css/jquery.dataTables.css" />
	<link rel="stylesheet" href="css/ColVis.css" />
	<!--<link rel="stylesheet" href="css/jqueryUI/jquery-ui-1.8.4.custom-smoothness.css" />-->
	<!--[if lte IE 8]><link rel="stylesheet" href="js/leaflet/MarkerCluster.Default.ie.css" /><![endif]-->
	<!--[if IE]><link type="text/css" href='css/main_ie.css' rel="stylesheet" /><![endif]-->
	<!--[if !IE]><!--><link type="text/css" href='css/main.css' rel="stylesheet" /><!--<![endif]-->
	
    <!--jquery-->
	<script src="js/jquery/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
	<!-- Jquery Plugin -->
	<!--<script src="js/jquery/pivot.min.js" type="text/javascript"></script>
	<script src="js/jquery/jquery_pivot.js" type="text/javascript"></script>-->
	<script src="js/jquery/jquery.dataTables.min.js" type="text/javascript"></script>
	<script src="js/jquery/ColVis.min.js" type="text/javascript"></script>
	<script src="http://malsup.github.com/jquery.form.js"></script> 

	<!--leaflet-->
	<script src="js/leaflet/leaflet.js" type="text/javascript"></script>
	<script src="js/leaflet/leaflet.markercluster.js" type="text/javascript"></script>
	<script src="js/leaflet/leaflet.heatmap.js" type="text/javascript"></script>
	<script src="js/leaflet/leaflet.heatmap-leaflet.js" type="text/javascript"></script>
	
	<!--google map-->
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    	
	<!--JTS Topology suite-->
	<script src="js/jsts/javascript.util.js" type="text/javascript"></script>
    <script src="js/jsts/jsts.js" type="text/javascript"></script>
	
	<!--google chart-->
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>  
	
	<!-- api -->
	<script src="js/api/pathgeo.layer.js" type="text/javascript"></script>
	<script src="js/api/pathgeo.util.js" type="text/javascript"></script>
	<script src="js/api/pathgeo.service.js" type="text/javascript"></script>
   
   	<!-- Data -->
	<script src="db/sanFran.js"></script>
	
    <!-- main -->
 	<script src="js/main.js" type="text/javascript"></script>
	<script src="js/social_media.js" type="text/javascript"></script>
	
     
        <!-- fake function for login -->
        <script type="text/javascript">
            function fakeLogin(){
                $("#usermenu_list").show();
                $("#user_login").hide();                
            }
        </script>
  </head>
  
  
  <body>
  	<div data-role="page" id='pageMap'>
  		
		<!--header-->
		<div id='header' class='ui-bar ui-bar-b'  >
			<h1>
				<img src='images/PathGeo-color.png' height=35px onclick='window.open("http://www.pathgeo.com")'/>
				<div>MapTime : <label id='lbl_dataName'></label></div>
			</h1>
			
			<a href="#dialog_usermenu" data-rel='popup' data-role='button' data-position-to="origin" data-inline="true" data-transition="slideup" data-icon="home" class="" data-mini="true" style='float:right'>User</a> 
	        <a href="#dialog_help" data-rel='popup' data-role='button' data-position-to="window" data-inline="true" data-transition="fade" data-icon="info" class="" data-mini="true" style='float:right'>Help</a>
			<!--<a href="#dialog_sharemap" data-rel='popup' data-role='button' data-position-to="window" data-inline="true" data-transition="slideup" data-icon="star" class="" data-mini="true" style='float:right'>Share</a>-->
			<!--<a href="#dialog_dataPanel" data-rel='popup' data-role='button' data-position-to="window" data-inline="true" data-transition="slideup" data-icon="bars" class="" data-mini="true" style='float:right'>Data List</a>-->
			<a href="#dialog_uploadData" data-rel='popup' data-role='button' data-position-to="window" data-inline="true" data-transition="fade" data-icon="grid" class="" data-mini="true" style='float:right' onclick='$("#uploadData_confirm").hide(); $("#uploadData_description").show(); $("#uploadData_controls").hide();'>Upload Data</a>
			<a id='test' href="#dialog_menu" data-rel='popup' data-role='button' data-position-to="window" data-inline="true" data-transition="fade" data-icon="grid" class="" data-mini="true" style='float:right'>Menu</a>
		</div>
		
		
		<!-- content-->
		<div id='content'>
			<!-- map-->
			<div id="div_map"></div>
				
			<!-- data table -->
			<div id='dataPanel'>
				<div id='dataTable_control'></div>
				<table cellpadding="0" cellspacing="0" border="0" class="display" id="dataTable"></table>
				
				<!-- dataTable chart-->
				<div id='dataTable_chart' style='display:none'>
					<!--chart control-->
					<div id='dataTable_chartControl' title='Chart settings'  onclick='$("#dataTable_chartControlMenu").css({left:-($("#dataTable_chartControlMenu").width()-10)}).show();'>
						<img src='images/1365859519_cog.png' width=25px height=25px />
						<div id='dataTable_chartControlMenu'>
							Change Chart Type:<br>
							<fieldset data-role="controlgroup" data-mini="true" data-type="horizontal">
							 	<input type="radio" name="dataTable_chartType" class="dataTable_chartType" id="dataTable_chartType_area" value="AreaChart" checked="checked">
							 	<label for="dataTable_chartType_area">Area Chart</label>
								<input type="radio" name="dataTable_chartType" class="dataTable_chartType" id="dataTable_chartType_pie" value="PieChart">
								<label for="dataTable_chartType_pie">Pie Chart</label>
								<input type="radio" name="dataTable_chartType" class="dataTable_chartType" id="dataTable_chartType_column" value="ColumnChart">
								<label for="dataTable_chartType_column">Column Chart</label>
							</fieldset>
							<hr>
							Change X and Y axis: 
							<fieldset data-role="controlgroup" data-type="horizontal">
								<label for="select_x">X:</label>
								<select id="select_x" name='select_x' data-mini="true"><option value='none'>Select X Axis</option></select>
								
								<label for="select_y">Y:</label>
								<select id="select_y" name='select_y' data-mini="true"><option value='none'>Select Y Axis</option></select>
							</fieldset>
						</div>
					</div>
					
					<!--chart content-->
					<div id='dataTable_chartContent'></div>
				</div>
			</div>
		</div>
		
	
		
		<!--main menu-->
		<div id='dialog_menu' data-role="popup" data-overlay-theme="a" data-theme="c" data-dismissible="false" data-history="false" style=''>
			<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right" >Close</a>
			
			<h2>MapTime provides you two ways to visualize your data or play with Big data.</h2>
			<ul>
				<li>
					<div onclick='$("#dialog_menu").popup("close"); if($.browser.mozilla){setTimeout(function(){$("#dialog_uploadData").popup("open");}, 100);}else{$("#dialog_uploadData").popup("open");}'>
						<img src='images/1367841372_Drive_Upload.png'/><p></p>
						<h1>Upload Data</h1>
						<label class='menu_description'>Upload you data and <Br>find more patterns with demographic and social media data</label>
					</div>
					<P></P><br>
					<input type='button' value='Try San Francisco Demo Data' style='' onclick='$("#dialog_menu").popup("close"); showDemo("SAN FRANCISCO");'   />
					<input type='button' value='Try San Diego Demo Data' style='' onclick='$("#dialog_menu").popup("close"); showDemo("SAN DIEGO");'   />
				</li>
				<li>
					<img src='images/map-icons.png' width='300px' height='96px' /><p></p>
					<h1>Business Intelligent</h1>
					<label class='menu_description'>Find potential markets <Br>with demographic and social media data</label><P></P><br>

					<div data-role="fieldcontain" style='width:100%; margin:0.5em 0'>
				         <label for="input_location" style='float:left; padding-top:6px;'>Place: </label>
				         <input type="text" name="input_location" id="input_location" value="San Diego" onkeypress='if(event.which==13 || event.keyCode==13){searchBusinessIntelligent(this.value);return false;}else{return true;}'>
				    </div>
				</li>
			</ul>
		</div>
		
		
		
		
		
	
		<!-- dialog -->
		<!-- upload data -->
		<div id='dialog_uploadData' data-role="popup" data-overlay-theme="a" data-theme="c" data-dismissible="false" style=''>
			<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
			
			<form action="saveTable.py" method="post" id="uploadData_form" enctype="multipart/form-data" style="width: 90%; margin: 0 auto;">
				<fieldset>
				
					<input type="file" name="photo" id="uploadData_input" size="70%">
					
					<!-- upload content -->
					<!-- NOTE: STILL WORKING ON LAYOUT -->
					
					<div id='uploadData_content'>
						<div id='uploadData_description' >
							<h3>Upload and Map Your Data:</h3><br>
							MapTime only support XLS format for this beta version. <P></P>
							We will support more data formats in the near future.	
						</div>
						
						<div id='uploadData_confirm' style='display:none'>
							<img id='img_loading' src="images/loading.gif" width=15px  />
							
							<div data-role="fieldcontain">
								<label for="uploadData_geocodingField">Select geocoding column: </label>
								
								<!--<select id='uploadData_geocodingField' name='uploadData_geocodingField' data-mini='true'> </select>-->
								<div id="uploadData_geocodingFields" style="height: 100px; background-color: white; color: black; padding-top: 10px; overflow: auto;">
								
								</div>
							</div>
							
							<div id='uploadData_agreement'>
								This is the PathGeo agreement.  
							</div>
						</div>
					</div>
					<div id="uploadData_controls" style="width: 95.8%; padding-top: 10px; display: none;">
						<label for='uploadData_agreementCheck'>I agree</label>
						<input type='checkbox' id='uploadData_agreementCheck' name='uploadData_agreementCheck' style="float: left; width: 100px;" />
						<!-- NOTE: There seems to be an issue with Jquery Mobile and this button.  The click button doesn't always fire.  
						Setting data-role to "none" means that it will not be processed by Jquery Mobile, and the event seems to work now. -->
						<input id="submit_button" type="button" value="Map Your Data" data-theme="b" style='float:right; '>
					</div>
					
				</fieldset>
			</form>
			
			
			<!--<input type='button' value='DEMO Data' onclick='showLayer(app.geocodingResult, true)'/>-->
		</div>
		
		
		<!--user menu-->
		<div id='dialog_usermenu' data-role="panel" data-position="right"  data-display="overlay" data-theme="a"  >
                            <fieldset id='user_login'>
            
                               <!-- <asp:Literal runat="server" ID="litMessage"></asp:Literal>-->

                                <label for="email">Email:</label>
                                <input type="email" name="email" id="email" value=""  />

                                <label for="password">Password:</label>
                                <input type="password" name="password" id="password" value="" />

                                    <input id="Submit1" type="submit" value="Login" data-role="button" data-inline="true" data-theme="b" onclick="fakeLogin()" />

                                <hr />Don't have a login? <a href="#">Sign Up</a>
                                <br />Forgot password? <a href="#">Click here</a>
                            </fieldset>
							
                            <div id='usermenu_list' style='display:none'>
                            	<div data-role="collapsible-set" data-theme="b" data-content-theme="d">
	                                <div data-role="collapsible" data-theme="d" data-content-theme="d" data-inset="true" data-mini="true"  data-iconpos="right" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
									    <h3>Upgrade Account</h3>
									   	<p>
											<form  target="_blank" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
											<input type="hidden" name="cmd" value="_s-xclick">
											<input type="hidden" name="hosted_button_id" value="9T9WRJH6ECWUS">
											<table>
											<tr><td><input type="hidden" name="on0" value="MapTime Services">MapTime Services</td></tr><tr><td><select name="os0">
												<option value="Basic">Basic $99.00 USD</option>
												<option value="Standard">Standard $449.00 USD</option>
												<option value="Premium">Premium $499.00 USD</option>
											</select> </td></tr>
											</table>
											<input type="hidden" name="currency_code" value="USD">
											<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
											<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
											</form>
									   	</p>
									</div>
									
									<div data-role="collapsible" data-theme="d" data-content-theme="d" data-inset="true"  data-mini="true"  data-iconpos="right" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
									    <h3>History</h3>
									</div>
									
									<div data-role="collapsible" data-theme="d" data-content-theme="d" data-inset="true"  data-mini="true"  data-iconpos="right" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
									    <h3>Settings</h3>
									</div>
									
									<div data-role="collapsible" data-theme="d" data-content-theme="d" data-inset="true"  data-mini="true"  data-iconpos="right" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
									    <h3>Log out</h3>
									</div>
								</div>
								<!--
								<ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="d">
                                    <li><a href="#">Upgrade Account</a></li>
                                    <li><a href="#">History</a></li>
                                    <li><a href="#">Settings</a></li>
                                    <li><a href="#">Log out</a></li>
                                </ul>-->
                                
                           </div>
		</div>
		
		
		<!--help-->
		<div id='dialog_help' data-role="popup" data-overlay-theme="a" data-theme="c" data-dismissible="false" style=''>
				<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
				<div id="getsat-widget-5632"></div>
				
				<script type="text/javascript" src="https://loader.engage.gsfn.us/loader.js"></script>
				<script type="text/javascript">
					if (typeof GSFN !== "undefined") { GSFN.loadWidget(5632,{"containerId":"getsat-widget-5632"}); }
				</script>
		</div>
		

		<!-- gallery-->
		<div id='div_gallery' style='bottom:0px;display:none;'>
			<div style='float:left;display:none; padding:10px;' id='mapGallery'>
				<ul data-role="listview" data-inset="true" data-divider-theme="b">
					<li>
						<div>
							<img src='images/gallery-defaultmap.png' title='Demographic Map' onclick='switchBaseLayer(app.layers.demographicData)'/>
							<img src='images/gallery-streetmap.png' title='Goolge Street Map' onclick='switchBaseLayer(app.basemaps["Google Streetmap"])'/>
							<img src='images/gallery-streetmap.png' title='Open Street Map' onclick='switchBaseLayer(app.basemaps["OpenStreetMap"])'/>
						</div>
					</li>		
				</ul>
			</div>
			<!--image-->
			<a href="#"></a>
		</div>
		
		
		
		<!--DATA LIST-->
		<div id='dialog_dataPanel' data-role="panel" data-position="left"  data-display="overlay" data-dismissible="false" data-theme="a"  >
			<div id='dataList'>
				<!--header-->
				<div data-role='header'>
					<a href="#" data-icon="check">Print</a>
					<h1>Data List</h1>
					<a href="#" data-icon="forward">Export</a>
				</div>
				<p></p>
				<!--datalist_container-->
				<div id='datalist_container'><ul data-role="listview" data-filter="true" data-filter-placeholder="Search your data" data-filter-theme="a" data-theme="a" ></ul></div>
			</div>
			
			<div id='dataDetail' data-role='panel' data-theme="a" data-overlay-theme=a data-transition="slide">
				<!--header-->
				<div data-role='header'>
					<a href="#" data-icon="home" onclick='$("#dataDetail").hide();$("#dataList").show();'>Data List</a>
					<h1 id='dataDetail_title'></h1>
					<a href="#" data-icon="forward" >Export</a>
				</div>
				
				<!--content-->
				<div id='dataDetail_content'></div>
			</div>
		</div>
		
		
	
		<!-- localInfo-->
		<div id='localInfo'>
			<a href="#" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext"  style='position:absolute; right:-10px; top:-6px;' onclick='$("#localInfo").hide();app.map.removeLayer(app.layers.demographicData);$(".leaflet-control-legend").hide();'>Close</a>
			<div data-role="navbar" style='margin-bottom:15px;'>
			    <ul>
			        <!--<li><a href="#" class="ui-btn-active" onclick='$(".localInfo_tabs").hide();$("#localInfo_demographicData").show();'>Demographic Data</a></li>-->
			        <li><a href="#" class="ui-btn-active" onclick='$(".localInfo_tabs").hide();$("#localInfo_businessActions").show();'>Business Actions</a></li>
			        <li><a href="#" onclick='$(".localInfo_tabs").hide();$("#localInfo_socialMedia").show();'>Social Media</a></li>
			    </ul>
			</div>
			
			<!-- demographic data-->
			<div id='localInfo_demographicData' class='localInfo_tabs' style='display:none'>
				<!-- demographic spatial-->
				<!--<label for='demographic_spatial'></label>
				<select id='demographic_spatial' name='demographic_spatial' data-mini="true">
					<option value='address'>5/10/15 miles of the address</option>
					<option value='zipcode'>zipcode level</option>
					<option value='city'>city level</option>
					<option value='county'>county level</option>
				</select>-->
				
				<!-- demographic dataType (seleect differnt types of demographic data)--> 
				<div id='demographic_type' data-role="collapsible-set" data-theme="c" data-content-theme="d" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d"> </div>
				
				
				
				<!--<a href='images/pathgeo_report.pdf' data-role='button' target='_blank'>Download Report</a>
				<P></P>-->
				
				<!--<div id='localInfo_chart' style='overflow-y:auto; overflow-x:hidden'></div>-->
			</div>
			
			<!-- business intelligent -->
			<div id='localInfo_businessActions' style='' class='localInfo_tabs'>
				<!-- select business actions-->
				<div id='businessActions_select' class='businessActions_tabs'>
					<!-- download report -->
					<label for='businessActions_type'>Business Actions</label>
					<img id='businessActions_downloadReport' src='images/1367454585_Cloud Download Off.png'  onclick='window.open("images/pathgeo_report.pdf")' title='Download Report' />
					
					<select id='businessActions_type' name='businessActions_type' data-mini="true">
						<option value='top_users'>Which zipcode has the highest number of customers</option>
						<option value='top_sales'>Which zipcode has the highest value of sales</option>
						<option value='avg_income_from_users'>Whatâ€™s the average incomes for my customers</option>
						<option value='most_language_from_users'>Which languages do users use most</option>
						<option value='potential_market'>Where are potential Markets</option>
					</select>
					
					<!-- business actions result-->
					<div id='businessActions_result'></div>
				</div>
				
				<!-- show the details of business actions, including demographic data-->
				<div id='businessActions_detail' style='display:none;' class='businessActions_tabs'>
					<!--header-->
					<div data-role='header' data-mini-"true">
						<a href="#" data-icon="back" onclick='$(".businessActions_tabs").hide(); $("#businessActions_select").show();'>Back</a>
						<h1 id='businessActions_detailTitle'></h1>
						<!--<a href="#" data-icon="forward">Export</a>-->
					</div>
					<!--content-->
					<div id='businessActions_detailContent'>
						<ul data-role='listview' data-inset='true'></ul>
					</div>
				</div>
				
			</div>
				
		
			
			<!-- social media-->
			<div id='localInfo_socialMedia' style='display:none;'  class='localInfo_tabs'>
				<div data-role="fieldcontain" style='margin:3px;'>
					<input id='socialMedia_keyword' name='socialMedia_keyword' type='text' value='Enter a Keyword' data-mini="true" onclick='this.value=""'/>
				</div>
				
				<input type="hidden" id="lat" value="test">
				<input type="hidden" id="lng" value="test">

				<!-- social media temporal filter -->
				<!--<div data-role="fieldcontain" style='margin:3px;'>
					<select id='socialMedia_temporal' name='socialMedia_temporal' data-mini="true">
						<option value='604800'>last week</option>
						<option value='2592000'>last month</option>
						<option value='31536000'>last year</option>
						<option value='63072000'>last 2 years</option>
					</select>
				</div>-->
				
				<!-- social media source filter -->
				<div data-role="fieldcontain" style='margin:3px;'>
					<select id='socialMedia_source' name='socialMedia_source' data-mini="true">
						<option value='flickr'>Flickr</option>
						<option value='twitter'>Twitter</option>
					</select>
				</div>
					
				<button type='button' onclick='callPython()' data-mini="true">Search</button>
				
				
				<div data-role="navbar" style='margin-bottom:15px; margin-top:15px' id="layer_selector">
					<ul>
						<li><a href="#" id="point_media" class="ui-btn-active" onclick='switchLayersMedia("point")'>Point Map</a></li>
						<li><a href="#" id="cluster_media" onclick='switchLayersMedia("cluster")'>Cluster Map</a></li>
						<li><a href="#" id="heat_media" onclick='switchLayersMedia("heatmap")'>Hot Spots</a></li>
					</ul>
				</div>
				
				
				

				<p id='social_results_count'></p>
				<p id='social_results_search'></p>
				<div id='socialMedia_result'>
					<ul data-role="listview" data-inset="true" id="search_results"></ul>
				</div>
			</div>
		</div>
		
		
		<!-- dataTable_nav-->
		<div id='dataTable_nav' style="display:none">
			<div data-role="navbar">
			    <ul>
			        <li><a href="#" class="ui-btn-active" onclick='$("#dataTable_wrapper").show();$("#dataTable_chart").hide();$("#dataTable_control .dataTable_nav ul li a").removeClass("ui-btn-active");$(this).addClass("ui-btn-active")'>Table</a></li>
			        <li><a href="#" onclick='$("#dataTable_wrapper").hide();$("#dataTable_chart").show();$("#dataTable_control .dataTable_nav ul li a").removeClass("ui-btn-active");$(this).addClass("ui-btn-active")'>Chart</a></li>
			    </ul>
			</div>
		</div>
		
	</div>
	
	
	
	
</body>
</html>
